---
applyTo: 'admin/*, **/admin*.js, server/admin*.js'
description: '為現有專案設計並實作一個簡易的後台管理系統，包含登入驗證、即時統計儀表板、資源列表與觀戰/監控功能。'
---
為現有專案設計並實作一個簡易的後台管理系統。

## 功能需求分析

1. **登入驗證**：使用 JWT 進行身份驗證，設定項寫在 config 檔案中
2. **即時統計儀表板**：顯示系統運作的關鍵指標（如總數量、各狀態數量等）
3. **資源列表**：顯示所有可監控資源的詳細狀態，包含關鍵欄位與時間資訊
4. **觀戰/監控功能**：即時查看特定資源的詳細狀態變化

## 實作步驟

1. **設定檔擴充**：在 config 中新增管理員帳號、密碼、JWT 密鑰設定
2. **認證模組**：建立 JWT 認證相關函式（驗證帳密、產生 Token、驗證 Token）
3. **資源管理擴充**：在現有資源管理模組中新增統計方法與觀戰者追蹤
4. **後台事件處理器**：使用獨立的 Socket.IO 命名空間處理後台專用事件
5. **整合至伺服器入口**：掛載後台靜態檔案、命名空間與 API 端點
6. **前端介面**：建立登入頁面、儀表板、資源列表與監控介面

## 技術考量

- 使用獨立的 Socket.IO 命名空間（如 `/admin`）隔離管理員連線
- 後台事件需廣播給觀戰者，但需區分一般玩家與管理員的資料權限
- 統計資料需即時更新，當資源狀態變化時主動推送給已訂閱的管理員
- 前端使用與主專案相同的技術棧以保持一致性

## 輸出檔案結構

```
├── admin/
│   ├── index.html      # 後台介面（登入 + 儀表板 + 監控）
│   ├── admin.js        # 前端邏輯
│   └── admin.css       # 後台樣式
├── server/
│   ├── adminAuth.js    # 認證模組
│   └── adminHandler.js # 後台 Socket 事件處理器
```
